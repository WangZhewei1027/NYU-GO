### 更新日志

#### 2025.1.1.0

- Location Drawer 改为点击站点后自动收起，提供直接的视觉反馈
- 微调 Add Routes 弹出窗口的 UI 布局
- leaving at xxx in 改为 departing from xxx in

#### 2025.1.2.0

- 剩余到达时间显示为 XX h XX min

#### 2025.1.2.1

- 导入所有 route 数据

#### 2025.1.3.0

- 修复在 route 内选择站点时 Card 意外关闭的动画
- 取消站点选择的 hover 动画

#### 2025.1.4.0

- 站内选择 stop 可以保存结果

#### 2025.1.19.0

- 可以正确计算最近三班的 schedule

#### 2025.1.20.0

- 完成 full schedule 的内容

#### 2025.1.20.1

- 修复 Route E 颜色为 brown

#### 2025.1.21.0

- clean up utils
- 修复首次进入应用白屏问题（直接重定向至 track 页面）

#### 2025.1.24.0

- 修复 track 页面剩余时间不能实时更新的问题（之前只有刷新页面才会更新）
- 调整 full schedule 滚动布局，增加底部占位滚动空间

#### 2025.1.25.0

- Card UI 调整

#### 2025.1.26.0

- 优化长站点名显示方式
- 解决 6 metrotech 作为到达站无效的问题, 并清理了所有问题数据（原因是原始直接导出的时刻表数据有格式问题）

#### 2025.1.26.1

- 修复 stops 过多时的 ui 问题（例如 route w）
- 调整 full schedule 字体

#### 2025.2.14.0

- 修复 full schedule 与上层站点的同步问题

#### 2025.2.14.1

- 添加个人设置页面

#### 2025.2.24.0

- map 界面的 draft 版本

#### 2025.2.26.0

- track 界面计算剩余时间

#### 2025.3.11.0

- 大更新。清理所有代码，完成 map 页面基本功能

#### 2025.3.11.1

- 修复动态导入的问题

#### 2025.3.12.0

- 修改 map 可视化图标

#### 2025.3.13.0

- 完成计算距离功能

#### 2025.3.16.0

- 新的 card 和进度条设计

#### 2025.3.16.1

- 再次解决 Route W 的竖线 UI 问题

#### 2025.3.16.2

- 渲染站点

#### 2025.3.19.0

- 修复 card 首次更新慢的问题（setInterval 之前手动触发一次）

#### 2025.3.19.1

- 修复 progress bar 更新不及时的问题（Zustand 需要用 set 方法更新才会订阅）

#### 2025.3.20.0

- 整理代码，讲类型抽象到 types
- 清理有关 zustand 的内容
- 优化站点的数据结构
- 重写 stop drawer 有关的逻辑部分
- 重写 stopName 比较逻辑

#### 2025.3.20.1

- 完成收藏站点功能，并储存在 localStorage 中

#### 2025.3.20.2

- 完成最近站点功能

#### 2025.3.20.3

- 修复意外向下传递给 drawer 的 rerender
- 增加动态数据的动效

#### 2025.3.20.0

- 增加 Google Web Analytics

#### 2025.4.2.0

- 增加异常数据传入时的健壮性
- 修改站点显示逻辑，zoom 太小时消失
- 用户位置改为实时监听，并在 map 上显示

#### 2025.4.3.0

- 加入公英制转换功能

#### 2025.4.3.1

- 修复公英制转换不能保存的 bug

#### 2025.4.3.2

- 增加收藏站点的动画

#### 2025.4.4.0

- 修复切换出发地剩余时间计算不及时的问题

#### 2025.4.4.1

- 修复 full schedule 异常重复的问题

#### 2025.4.4.2

- 增加 clear 缓存功能

#### 2025.4.4.3

- 自动选择最近的站点

#### 2025.4.4.4

- 更新 alert msg

#### 2025.4.5.0

- 构建 ios 版本
  - 屏幕方向锁定为 portrait
  - 对应页面增加 paddingTop 避开刘海区域
  - 增加了初始的开屏页面
- web 版本
  - 修复"Cleveland & Spring St."和"Cleveland Pl & Spring St."被认为是不同站的问题
  - 修复自动选择最近站过于频繁的问题
  - 优化 Settings 页面的 UI

#### 2025.4.10.0

- 统一 progress bar 的长度

#### 2025.6.10.0

- 修复 favicon 不被识别的问题（最新版本的 nextjs 需要把图标命名为 icon.ico）
- 修复 "20th St & Loop Exit" 和 "20th Street At Loop Exit" 被认为是不同站的问题

#### 2025.6.10.1

- 修复自动选择最近站点过于频繁的问题（现在的逻辑是首次打开 app 或者手动刷新页面的时候，才允许选择最近站点）

#### 2025.6.10.2

- Add Routes 改为 Edit Routes
- 线路选择弹出框中，Close 改为 Save
- 修复 drawer 有时 nearest stop 不显示的 bug

#### 2025.6.10.3

- 增加功能：当今天这个 Route 没有 schedule 的时候，Card 变为灰色 disable 状态（注意和今天班次结束的状态不一样。没有剩余时间可能是今天班次结束了，但是还是可以查看 full schedule）

#### 2025.6.10.4

- 今天这条 route 有 Schedule，但当前选择站点不在这条 route 中，表现为打开 Card 后，显示 “Departure stop not available”

#### 2025.6.16.0

- 到达站无 Schedule 信息时，显示 “Arrival stop not available”

#### 2025.6.24.0

- 修复 map 上非 nyu shuttle 意外带有颜色的 bug

#### 2025.6.24.1

- 修复 map 上 ferry 图标的 bug

#### 2025.7.9.0

- map 上显示路线
- 路线若不是 nyu 官方的，以虚线显示

#### 2025.7.10.0

- map 上显示行驶方向

#### 2025.7.15.0

- 改用新配色

#### 2025.7.15.1

- 优化地图操作体验，限制缩放

#### 2025.7.19.0

- 调整地图上的路线颜色

#### 2025.7.20.0

- 增加地图上 popup 站点显示路线
- popup 增加 autopan 功能（超出屏幕自动调整）

#### 2025.7.23.0

- 更新异名站点的数据

#### 2025.8.1.0

- 底部导航栏改回上下等宽，暂时不判断是否为全面屏机型

#### 2025.8.11.0

- 修复currentLocation的bug

#### 2025.8.11.1

- 适配刘海

### 调试相关

#### node version

node v24

#### 模拟时间

```
// 假装现在是 2025 年 6 月 7 日 （周六）
const fixedDate = new Date("2025-06-07T12:00:00Z")

// 重新定义全局 Date 构造函数
Date = class extends Date {
  constructor(...args) {
    if (args.length === 0) {
      return fixedDate
    }
    return super(...args)
  }
  static now() {
    return fixedDate.getTime()
  }
}
```

> 注意：该作用为一次性，浏览器刷新后就失效。
