"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[688],{6688:(t,e,o)=>{o.d(e,{P:()=>i});var r=o(2208),u=o(709),d=o(2432),a=o(2364),n=o(2434);let i=(0,r.v)()((0,u.lt)(t=>({location:{latitude:0,longitude:0},stopsData:function(){let t={};return(0,d.Jv)().then(e=>{Object.entries(e).forEach(e=>{let[o,r]=e;t[o]={routes:r,position:function(t){let e=Object.values(a.Gb).find(e=>(0,n.A)(e.name,t));return e?{latitude:e.latitude,longitude:e.longitude}:null}(o)||{latitude:0,longitude:0}}})}),t}(),setLocation:e=>t({location:e}),personalData:{},setPersonalData:e=>t({personalData:e}),currentLocation:"715 Broadway",updateCurrentLocation:e=>t({currentLocation:e}),shuttleData:{},setShuttleData:e=>t({shuttleData:e}),unit:"metric",setUnit:e=>t({unit:e})})))},2434:(t,e,o)=>{o.d(e,{A:()=>u});let r={"Cleveland & Spring St.":"Cleveland Pl & Spring St.","80 Lafayette Street":"80 Lafayette St."};function u(t,e){return!!t&&!!e&&(!!(t.trim().toLowerCase().includes(e.trim().toLowerCase())||e.trim().toLowerCase().includes(t.trim().toLowerCase()))||(r[t.trim()]===e.trim()||r[e.trim()]===t.trim())&&(console.log('Special stop match: "'.concat(t,'" is considered the same as "').concat(e,'"')),!0))}},2432:(t,e,o)=>{o.d(e,{A0:()=>I,A1:()=>s,JZ:()=>m,Jv:()=>p,fP:()=>l,rn:()=>S});var r=o(9159),u=o.n(r),d=o(2434);let a=["6 MetroTech","715 Broadway"];function n(t){let e=new Date().getDay(),o="mt";return 0===e||6===e?o="w":5===e&&(o="f"),"/route_".concat(t,"_").concat(o,".csv")}async function i(t){try{let e=await fetch(t);if(!e.ok)throw Error("Failed to fetch file: ".concat(t));let o=await e.text();return new Promise((t,e)=>{u().parse(o,{header:!0,skipEmptyLines:!0,complete:e=>t(e.data),error:t=>e(t)})})}catch(t){return t instanceof Error?console.warn("Error fetching or parsing CSV: ".concat(t.message)):console.warn("Error fetching or parsing CSV: ".concat(t)),[]}}async function s(t,e){let o=new Date,r=o.getHours(),u=o.getMinutes(),d=n(t),s=await i(d);if(!(s.length>0))return -1;for(let t of s)for(let[o,d]of Object.entries(t)){let t=e;if(a.includes(e)&&(t=e+" Departure"),o.toLowerCase().includes(t.toLowerCase())){let[t,e]=d.split(" "),[o,a]=t.split(":").map(Number);"PM"===e&&12!==o?o+=12:"AM"===e&&12===o&&(o=0);let n=(o-r)*60+(a-u);if(n>=0)return n}}return -1}async function I(t,e,o){let r=new Date;r.getHours(),r.getMinutes();let u=n(t),s=await i(u),I=e,l=o;a.includes(e)&&(I=e+" Departure"),a.includes(o)&&(l=o+" Arrival"),console.log("开始计算从".concat(I,"到").concat(l,"的时刻表"));let m=[],p=[];if(s.length>0)for(let t of s)for(let[e,o]of Object.entries(t))(0,d.A)(e,I)&&m.push(o),(0,d.A)(e,l)&&p.push(o);return{fromSchedule:m,toSchedule:p}}async function l(t,e,o){let r=new Date,u=r.getHours(),d=r.getMinutes(),{fromSchedule:a,toSchedule:n}=await I(t,e,o),i=[],s=0,l=60*u+d;for(let t=0;t<a.length;t++)if(function(t){let[e,o]=t.split(" "),[r,u]=e.split(":").map(Number);return"PM"===o&&12!==r?r+=12:"AM"===o&&12===r&&(r=0),60*r+u}(a[t])>=l){s=t;break}return{fromSchedule:a.slice(s,s+3),toSchedule:n.slice(s,s+3)}}let m={A:{promo:"Service to/from Tandon in Brooklyn",borderColor:"border-pink-400",bgColor:"bg-pink-400",textColor:"text-pink-400"},B:{promo:"Points South of WSQ",borderColor:"border-purple-400",bgColor:"bg-purple-400",textColor:"text-purple-400"},C:{promo:"Stuyvesant Town & Points North of WSQ",borderColor:"border-blue-400",bgColor:"bg-blue-400",textColor:"text-blue-400"},E:{promo:"Points North of WSQ",borderColor:"border-brown-500",bgColor:"bg-brown-500",textColor:"text-brown-500"},F:{promo:"3rd Avenue Express",borderColor:"border-green-400",bgColor:"bg-green-400",textColor:"text-green-400"},G:{promo:"Greenwich Hall",borderColor:"border-cyan-400",bgColor:"bg-cyan-400",textColor:"text-cyan-400"},W:{promo:"Weekend Service Combining Routes B, E, & G",borderColor:"border-yellow-400",bgColor:"bg-yellow-400",textColor:"text-yellow-400"}};async function p(){let t=await h(),e={};if(t)for(let o of t)for(let[t,r]of Object.entries(o))""!==r&&(e[r]?e[r].push(t):e[r]=[t],e[r].sort());return e}async function h(){let t=[];return await fetch("/stops_data.csv").then(t=>{if(!t.ok)throw Error("Network response was not ok");return t.text()}).then(e=>{u().parse(e,{header:!0,skipEmptyLines:!0,complete:e=>{t=e.data},error:t=>{console.warn("Error parsing CSV:",t)}})}).catch(t=>{console.warn("Error fetching CSV:",t)}),t}async function S(t){let e=await h(),o=[];if(e)for(let r of e)for(let[e,u]of Object.entries(r))e===t&&""!==u&&o.push(u);return o}},2364:t=>{t.exports=JSON.parse('{"Gb":{"ID150435":{"routeId":"41890","stopId":"150435","position":"1","name":"NYU Lagone Hospital","latitude":40.6907073,"longitude":-73.996395627,"id":"150435","userId":"2396","radius":50,"routeName":"Cobble Hill","routeShortname":"Brooklyn","routeGroupId":0},"ID150436":{"routeId":"41890","stopId":"150436","position":"2","name":"Bergen Street Station","latitude":40.687059323,"longitude":-73.99016694,"id":"150436","userId":"2396","radius":50,"routeName":"Cobble Hill","routeShortname":"Brooklyn","routeGroupId":0},"ID150437":{"routeId":"41890","stopId":"150437","position":"3","name":"Borough Hall Station","latitude":40.692540722,"longitude":-73.990435335,"id":"150437","userId":"2396","radius":50,"routeName":"Cobble Hill","routeShortname":"Brooklyn","routeGroupId":0},"ID150438":{"routeId":"41890","stopId":"150438","position":"4","name":"Icon Parking Garage","latitude":40.69112,"longitude":-73.9899,"id":"150438","userId":"2396","radius":50,"routeName":"Cobble Hill","routeShortname":"Brooklyn","routeGroupId":0},"ID13138":{"routeId":"45769","stopId":"13138","position":"1","name":"E River Term","latitude":40.743865,"longitude":-73.970701,"id":"13138","userId":"1007","radius":250,"routeName":"Ferry Route","routeShortname":"","routeGroupId":0},"ID13139":{"routeId":"45769","stopId":"13139","position":"2","name":"Brooklyn Term","latitude":40.646526,"longitude":-74.026587,"id":"13139","userId":"1007","radius":250,"routeName":"Ferry Route","routeShortname":"","routeGroupId":0},"ID6545":{"routeId":"59834","stopId":"6545","position":"16","name":"715 Broadway","latitude":40.729077,"longitude":-73.993748,"id":"6545","userId":"1007","radius":85,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6564":{"routeId":"59834","stopId":"6564","position":"6","name":"14th St At Irving Place EB","latitude":40.734208156,"longitude":-73.989395416,"id":"6564","userId":"1007","radius":69,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6580":{"routeId":"59834","stopId":"6580","position":"7","name":"14th Street At Third Avenue","latitude":40.733102,"longitude":-73.986791,"id":"6580","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6566":{"routeId":"59834","stopId":"6566","position":"8","name":"First Avenue At 17th Street","latitude":40.73313,"longitude":-73.981222,"id":"6566","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6567":{"routeId":"59834","stopId":"6567","position":"9","name":"First Avenue At 24th Street","latitude":40.737082,"longitude":-73.978343,"id":"6567","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6568":{"routeId":"59834","stopId":"6568","position":"10","name":"First Avenue At 26th Street","latitude":40.738911,"longitude":-73.977014,"id":"6568","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID13110":{"routeId":"59666","stopId":"13110","position":"7","name":"NYU Langone Health","latitude":40.741865,"longitude":-73.974879,"id":"13110","userId":"1007","radius":75,"routeName":"Route E","routeShortname":"E","routeGroupId":0},"ID6570":{"routeId":"59834","stopId":"6570","position":"12","name":"Lexington Avenue At 31st Street","latitude":40.744396,"longitude":-73.981222,"id":"6570","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6571":{"routeId":"59834","stopId":"6571","position":"13","name":"Gramercy Green","latitude":40.739329,"longitude":-73.982831,"id":"6571","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID13118":{"routeId":"59832","stopId":"13118","position":"9","name":"Third Avenue At 17th Street S","latitude":40.735018,"longitude":-73.985978,"id":"13118","userId":"1007","radius":75,"routeName":"Route F","routeShortname":"F","routeGroupId":0},"ID6573":{"routeId":"59834","stopId":"6573","position":"15","name":"14th St At Irving Place WB","latitude":40.734116,"longitude":-73.989034,"id":"6573","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6556":{"routeId":"59829","stopId":"6556","position":"1","name":"20th Street At Loop Exit","latitude":40.734085,"longitude":-73.977781,"id":"6556","userId":"1007","radius":75,"routeName":"Route C","routeShortname":"C","routeGroupId":0},"ID6557":{"routeId":"59829","stopId":"6557","position":"2","name":"Avenue C At 18th Street","latitude":40.731242,"longitude":-73.974143,"id":"6557","userId":"1007","radius":75,"routeName":"Route C","routeShortname":"C","routeGroupId":0},"ID6558":{"routeId":"59829","stopId":"6558","position":"3","name":"Avenue C At 16th Street","latitude":40.729895,"longitude":-73.974684,"id":"6558","userId":"1007","radius":75,"routeName":"Route C","routeShortname":"C","routeGroupId":0},"ID6559":{"routeId":"59829","stopId":"6559","position":"4","name":"Avenue C At 14th Street","latitude":40.72883,"longitude":-73.975474,"id":"6559","userId":"1007","radius":75,"routeName":"Route C","routeShortname":"C","routeGroupId":0},"ID6560":{"routeId":"59829","stopId":"6560","position":"5","name":"14th Street At Avenue B","latitude":40.729371,"longitude":-73.977786,"id":"6560","userId":"1007","radius":75,"routeName":"Route C","routeShortname":"C","routeGroupId":0},"ID6561":{"routeId":"59829","stopId":"6561","position":"6","name":"14th Street At Avenue A","latitude":40.730387,"longitude":-73.980194,"id":"6561","userId":"1007","radius":75,"routeName":"Route C","routeShortname":"C","routeGroupId":0},"ID6562":{"routeId":"59829","stopId":"6562","position":"7","name":"14th Street At 1st Avenue","latitude":40.731251,"longitude":-73.982309,"id":"6562","userId":"1007","radius":75,"routeName":"Route C","routeShortname":"C","routeGroupId":0},"ID6563":{"routeId":"59832","stopId":"6563","position":"10","name":"Third Avenue At 13th Street","latitude":40.733157,"longitude":-73.987323,"id":"6563","userId":"1007","radius":75,"routeName":"Route F","routeShortname":"F","routeGroupId":0},"ID6550":{"routeId":"59834","stopId":"6550","position":"2","name":"Broadway & Broome St.","latitude":40.721635,"longitude":-74.000049,"id":"6550","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6551":{"routeId":"59834","stopId":"6551","position":"3","name":"80 Lafayette Street","latitude":40.717122,"longitude":-74.001777,"id":"6551","userId":"1007","radius":127,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6547":{"routeId":"59830","stopId":"6547","position":"6","name":"Metro Tech Way","latitude":40.693106,"longitude":-73.985498,"id":"6547","userId":"1007","radius":75,"routeName":"Route A","routeShortname":"A","routeGroupId":0},"ID8801":{"routeId":"59830","stopId":"8801","position":"9","name":"Cadman Plaza & Clark Street","latitude":40.696808,"longitude":-73.991254,"id":"8801","userId":"1007","radius":120,"routeName":"Route A","routeShortname":"A","routeGroupId":0},"ID9296":{"routeId":"59834","stopId":"9296","position":"4","name":"Cleveland Pl & Spring St","latitude":40.722163,"longitude":-73.997112,"id":"9296","userId":"1007","radius":50,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6553":{"routeId":"59834","stopId":"6553","position":"5","name":"Lafayette & E. 4th St","latitude":40.727934,"longitude":-73.993036,"id":"6553","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID9298":{"routeId":"59832","stopId":"9298","position":"2","name":"Third Avenue At 11th Street (NB)","latitude":40.731519,"longitude":-73.988345,"id":"9298","userId":"1007","radius":50,"routeName":"Route F","routeShortname":"F","routeGroupId":0},"ID6574":{"routeId":"59832","stopId":"6574","position":"3","name":"Third Avenue At 14th Street","latitude":40.733588,"longitude":-73.986889,"id":"6574","userId":"1007","radius":75,"routeName":"Route F","routeShortname":"F","routeGroupId":0},"ID6572":{"routeId":"59834","stopId":"6572","position":"14","name":"Third Avenue At 17th Street N","latitude":40.735426,"longitude":-73.985619,"id":"6572","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID6575":{"routeId":"59832","stopId":"6575","position":"5","name":"Opposite Gramercy Green","latitude":40.739069,"longitude":-73.982951,"id":"6575","userId":"1007","radius":75,"routeName":"Route F","routeShortname":"F","routeGroupId":0},"ID6576":{"routeId":"59832","stopId":"6576","position":"6","name":"Third Avenue At 30th Street","latitude":40.743361,"longitude":-73.979802,"id":"6576","userId":"1007","radius":75,"routeName":"Route F","routeShortname":"F","routeGroupId":0},"ID9299":{"routeId":"59832","stopId":"9299","position":"11","name":"Third Avenue At 11th Street (SB)","latitude":40.731233,"longitude":-73.988729,"id":"9299","userId":"1007","radius":50,"routeName":"Route F","routeShortname":"F","routeGroupId":0},"ID6577":{"routeId":"59833","stopId":"6577","position":"2","name":"Morton & Greenwich","latitude":40.731424,"longitude":-74.007932,"id":"6577","userId":"1007","radius":73,"routeName":"Route G","routeShortname":"G","routeGroupId":0},"ID6569":{"routeId":"59834","stopId":"6569","position":"11","name":"NYU Langone Med Ctr","latitude":40.646901,"longitude":-74.020897,"id":"6569","userId":"1007","radius":75,"routeName":"Route W","routeShortname":"W","routeGroupId":0},"ID13109":{"routeId":"59835","stopId":"13109","position":"8","name":"Hospital 150 E55th st.","latitude":40.646901,"longitude":-74.020897,"id":"13109","userId":"1007","radius":50,"routeName":"Brooklyn NYU Langone Shuttle","routeShortname":"","routeGroupId":0},"ID13111":{"routeId":"59835","stopId":"13111","position":"2","name":"Ferry 58th St.& Pier","latitude":40.646637,"longitude":-74.025521,"id":"13111","userId":"1007","radius":50,"routeName":"Brooklyn NYU Langone Shuttle","routeShortname":"","routeGroupId":0},"ID7496":{"routeId":"59835","stopId":"7496","position":"3","name":"Admin Bldng 58th /2nd Ave EB","latitude":40.645294,"longitude":-74.022786,"id":"7496","userId":"1007","radius":75,"routeName":"Brooklyn NYU Langone Shuttle","routeShortname":"","routeGroupId":0},"ID7494":{"routeId":"59835","stopId":"7494","position":"5","name":"Subway 4th Ave 53rd St.","latitude":40.644915,"longitude":-74.014311,"id":"7494","userId":"1007","radius":75,"routeName":"Brooklyn NYU Langone Shuttle","routeShortname":"","routeGroupId":0},"ID7495":{"routeId":"59835","stopId":"7495","position":"6","name":"Subway 4th Ave 59th St.","latitude":40.641215,"longitude":-74.018071,"id":"7495","userId":"1007","radius":75,"routeName":"Brooklyn NYU Langone Shuttle","routeShortname":"","routeGroupId":0},"ID13117":{"routeId":"59835","stopId":"13117","position":"7","name":"Admin Bldng 58th /2nd Ave WB","latitude":40.645164,"longitude":-74.02262,"id":"13117","userId":"1007","radius":50,"routeName":"Brooklyn NYU Langone Shuttle","routeShortname":"","routeGroupId":0},"ID13131":{"routeId":"59836","stopId":"13131","position":"1","name":"8th Ave. & 41st St.","latitude":40.756185,"longitude":-73.990486,"id":"13131","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Eastbound","routeShortname":"","routeGroupId":0},"ID13121":{"routeId":"59836","stopId":"13121","position":"2","name":"34th St. & Penn Station EB","latitude":40.751045,"longitude":-73.990847,"id":"13121","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Eastbound","routeShortname":"","routeGroupId":0},"ID13122":{"routeId":"59836","stopId":"13122","position":"3","name":"Herald Square 34th St. / 6th Ave EB","latitude":40.749454,"longitude":-73.987258,"id":"13122","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Eastbound","routeShortname":"","routeGroupId":0},"ID13123":{"routeId":"59837","stopId":"13123","position":"2","name":"M 34th St/Park Ave EB","latitude":40.746832,"longitude":-73.980962,"id":"13123","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Westbound","routeShortname":"","routeGroupId":0},"ID13125":{"routeId":"59836","stopId":"13125","position":"5","name":"34th St. & 2nd Ave.","latitude":40.744805,"longitude":-73.976156,"id":"13125","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Eastbound","routeShortname":"","routeGroupId":0},"ID7473":{"routeId":"59838","stopId":"7473","position":"5","name":"Man Lobby Entrance 550 1st Ave","latitude":40.742886,"longitude":-73.974172,"id":"7473","userId":"1007","radius":42,"routeName":"Manhattan Park Ave","routeShortname":"Manhattan Park Ave.","routeGroupId":0},"ID70677":{"routeId":"59837","stopId":"70677","position":"3","name":"ACC 240 E. 38th Street WB","latitude":40.747569,"longitude":-73.974733,"id":"70677","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Westbound","routeShortname":"","routeGroupId":0},"ID70678":{"routeId":"59837","stopId":"70678","position":"4","name":"LOC 333 E. 38th Street","latitude":40.746532,"longitude":-73.972277,"id":"70678","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Westbound","routeShortname":"","routeGroupId":0},"ID70679":{"routeId":"59837","stopId":"70679","position":"5","name":"Grand Central Station 42nd St/Park Avenue","latitude":40.752404,"longitude":-73.97835,"id":"70679","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Westbound","routeShortname":"","routeGroupId":0},"ID13129":{"routeId":"59837","stopId":"13129","position":"9","name":"Herald Square 34th St. / 6th Ave. WB","latitude":40.750004,"longitude":-73.988156,"id":"13129","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Westbound","routeShortname":"","routeGroupId":0},"ID70681":{"routeId":"59837","stopId":"70681","position":"10","name":"34th Street & Penn Station WB","latitude":40.751287,"longitude":-73.991189,"id":"70681","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Westbound","routeShortname":"","routeGroupId":0},"ID70676":{"routeId":"59837","stopId":"70676","position":"11","name":"Port Authority 8th Ave","latitude":40.756185,"longitude":-73.990486,"id":"70676","userId":"1007","radius":50,"routeName":"Manhattan Commuter Shuttle Westbound","routeShortname":"","routeGroupId":0},"ID7474":{"routeId":"59838","stopId":"7474","position":"2","name":"Admin 360 Park Avenue","latitude":40.741634,"longitude":-73.985225,"id":"7474","userId":"1007","radius":75,"routeName":"Manhattan Park Ave","routeShortname":"Manhattan Park Ave.","routeGroupId":0},"ID7475":{"routeId":"59838","stopId":"7475","position":"3","name":"Admin One Park Avenue","latitude":40.7461152,"longitude":-73.981906,"id":"7475","userId":"1007","radius":75,"routeName":"Manhattan Park Ave","routeShortname":"Manhattan Park Ave.","routeGroupId":0},"ID7470":{"routeId":"59838","stopId":"7470","position":"4","name":"Permutter Cancer Center 160 E 34th St","latitude":40.745887,"longitude":-73.978563,"id":"7470","userId":"1007","radius":75,"routeName":"Manhattan Park Ave","routeShortname":"Manhattan Park Ave.","routeGroupId":0}}}')}}]);